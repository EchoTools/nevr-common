# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: rtapi/telemetry_v1.proto
# plugin: python-betterproto
from dataclasses import dataclass
from datetime import datetime
from typing import Dict, List

import betterproto

from . import enginehttp


class Role(betterproto.Enum):
    """Defines the possible roles or teams a player can be assigned to."""

    ROLE_UNSPECIFIED = 0
    BLUE_TEAM = 1
    ORANGE_TEAM = 2
    SPECTATOR = 3
    SOCIAL_PARTICIPANT = 4
    MODERATOR = 5


class EmotePlayedEmoteType(betterproto.Enum):
    PRIMARY = 0
    SECONDARY = 1


@dataclass
class TelemetryHeader(betterproto.Message):
    """
    * Header contains the metadata for the entire session capture. This message
    should be written once at the beginning of the file.
    """

    # A unique identifier for the capture, e.g., a UUID.
    capture_id: str = betterproto.string_field(1)
    # The timestamp indicating when the capture was initiated.
    created_at: datetime = betterproto.message_field(2)
    # An arbitrary key-value store for additional metadata, such as game version,
    # server IP, or map name.
    metadata: Dict[str, str] = betterproto.map_field(
        3, betterproto.TYPE_STRING, betterproto.TYPE_STRING
    )


@dataclass
class LobbySessionStateFrame(betterproto.Message):
    """
    * Frame represents a single snapshot of game state data. A sequence of
    these messages follows the Header in the data stream.
    """

    # The sequential index of the frame, starting from 0.
    frame_index: int = betterproto.uint32_field(1)
    # The precise timestamp when this frame's data was captured.
    timestamp: datetime = betterproto.message_field(2)
    # A list of discrete events that occurred during this frame.
    events: List["LobbySessionEvent"] = betterproto.message_field(3)
    # The session data for this frame, including player locations.
    session: enginehttp.SessionResponse = betterproto.message_field(4)
    # The user bones data for this frame.
    player_bones: enginehttp.PlayerBonesResponse = betterproto.message_field(5)


@dataclass
class LobbySessionEvent(betterproto.Message):
    """A wrapper for any event that can occur during a session."""

    # Game State Events
    round_started: "RoundStarted" = betterproto.message_field(10, group="payload")
    round_paused: "RoundPaused" = betterproto.message_field(11, group="payload")
    round_unpaused: "RoundUnpaused" = betterproto.message_field(12, group="payload")
    round_ended: "RoundEnded" = betterproto.message_field(13, group="payload")
    match_ended: "MatchEnded" = betterproto.message_field(14, group="payload")
    scoreboard_updated: "ScoreboardUpdated" = betterproto.message_field(
        15, group="payload"
    )
    # Player Events
    player_joined: "PlayerJoined" = betterproto.message_field(20, group="payload")
    player_left: "PlayerLeft" = betterproto.message_field(21, group="payload")
    player_switched_team: "PlayerSwitchedTeam" = betterproto.message_field(
        22, group="payload"
    )
    emote_played: "EmotePlayed" = betterproto.message_field(23, group="payload")
    # Disc Events
    disc_possession_changed: "DiscPossessionChanged" = betterproto.message_field(
        30, group="payload"
    )
    disc_thrown: "DiscThrown" = betterproto.message_field(31, group="payload")
    disc_caught: "DiscCaught" = betterproto.message_field(32, group="payload")
    # Scoring Events
    goal_scored: "GoalScored" = betterproto.message_field(40, group="payload")
    # Stat-based Events
    player_save: "PlayerSave" = betterproto.message_field(50, group="payload")
    player_stun: "PlayerStun" = betterproto.message_field(51, group="payload")
    player_pass: "PlayerPass" = betterproto.message_field(52, group="payload")
    player_steal: "PlayerSteal" = betterproto.message_field(53, group="payload")
    player_block: "PlayerBlock" = betterproto.message_field(54, group="payload")
    player_interception: "PlayerInterception" = betterproto.message_field(
        55, group="payload"
    )
    player_assist: "PlayerAssist" = betterproto.message_field(56, group="payload")
    player_shot_taken: "PlayerShotTaken" = betterproto.message_field(
        57, group="payload"
    )


@dataclass
class RoundStarted(betterproto.Message):
    """Fired when the round starts."""

    round_number: int = betterproto.int32_field(1)


@dataclass
class RoundPaused(betterproto.Message):
    """Fired when the game is paused."""

    pause_state: enginehttp.PauseState = betterproto.message_field(1)


@dataclass
class RoundUnpaused(betterproto.Message):
    """Fired when the game is unpaused."""

    pause_state: enginehttp.PauseState = betterproto.message_field(1)


@dataclass
class RoundEnded(betterproto.Message):
    """Fired when a round finishes."""

    round_number: int = betterproto.int32_field(1)
    winning_team: "Role" = betterproto.enum_field(2)


@dataclass
class MatchEnded(betterproto.Message):
    """Fired when the match is over."""

    winning_team: "Role" = betterproto.enum_field(1)


@dataclass
class ScoreboardUpdated(betterproto.Message):
    """Fired on any change to score or round count."""

    blue_points: int = betterproto.int32_field(1)
    orange_points: int = betterproto.int32_field(2)
    blue_round_score: int = betterproto.int32_field(3)
    orange_round_score: int = betterproto.int32_field(4)
    game_clock_display: str = betterproto.string_field(5)


@dataclass
class PlayerJoined(betterproto.Message):
    """Fired when a new player is detected in the session."""

    # Contains the full initial state of the player.
    player: enginehttp.TeamMember = betterproto.message_field(1)
    role: "Role" = betterproto.enum_field(2)


@dataclass
class PlayerLeft(betterproto.Message):
    """Fired when a player is no longer detected in the session."""

    player_slot: int = betterproto.int32_field(1)
    display_name: str = betterproto.string_field(2)


@dataclass
class PlayerSwitchedTeam(betterproto.Message):
    """Fired when a player changes teams or roles."""

    player_slot: int = betterproto.int32_field(1)
    new_role: "Role" = betterproto.enum_field(2)
    prev_role: "Role" = betterproto.enum_field(3)


@dataclass
class EmotePlayed(betterproto.Message):
    """Fired when a player starts playing an emote."""

    player_slot: int = betterproto.int32_field(1)


@dataclass
class DiscPossessionChanged(betterproto.Message):
    """Fired when possession of the disc changes."""

    # The account number of the player who now has possession.
    player_slot: int = betterproto.int32_field(1)
    previous_slot: int = betterproto.int32_field(2)


@dataclass
class DiscThrown(betterproto.Message):
    """Fired when a player throws the disc."""

    player_slot: int = betterproto.int32_field(1)
    # Contains the detailed physics of the throw.
    throw_details: enginehttp.LastThrowInfo = betterproto.message_field(2)


@dataclass
class DiscCaught(betterproto.Message):
    """Fired when a player catches the disc."""

    player_slot: int = betterproto.int32_field(1)


@dataclass
class GoalScored(betterproto.Message):
    """Fired when a goal is scored."""

    # Contains all details about the score.
    score_details: enginehttp.LastScore = betterproto.message_field(1)


@dataclass
class PlayerGoal(betterproto.Message):
    player_slot: int = betterproto.int32_field(1)
    total_goals: int = betterproto.int32_field(2)
    points: int = betterproto.int32_field(3)


@dataclass
class PlayerSave(betterproto.Message):
    """Fired when a player's 'saves' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_saves: int = betterproto.int32_field(2)


@dataclass
class PlayerStun(betterproto.Message):
    """Fired when a player's 'stuns' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_stuns: int = betterproto.int32_field(2)


@dataclass
class PlayerPass(betterproto.Message):
    """Fired when a player's 'passes' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_passes: int = betterproto.int32_field(2)


@dataclass
class PlayerSteal(betterproto.Message):
    """Fired when a player's 'steals' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_steals: int = betterproto.int32_field(2)


@dataclass
class PlayerBlock(betterproto.Message):
    """Fired when a player's 'blocks' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_blocks: int = betterproto.int32_field(2)


@dataclass
class PlayerInterception(betterproto.Message):
    """Fired when a player's 'interceptions' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_interceptions: int = betterproto.int32_field(2)


@dataclass
class PlayerAssist(betterproto.Message):
    """Fired when a player's 'assists' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_assists: int = betterproto.int32_field(2)


@dataclass
class PlayerShotTaken(betterproto.Message):
    """Fired when a player's 'shots_taken' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_shots: int = betterproto.int32_field(2)
