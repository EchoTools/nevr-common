# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: telemetry/v1/telemetry.proto
# plugin: python-betterproto
from dataclasses import dataclass
from datetime import datetime
from typing import Dict, List

import betterproto

from .apigame import v1


class Role(betterproto.Enum):
    """Defines the possible roles or teams a player can be assigned to."""

    ROLE_UNSPECIFIED = 0
    ROLE_BLUE_TEAM = 1
    ROLE_ORANGE_TEAM = 2
    ROLE_SPECTATOR = 3
    ROLE_SOCIAL_PARTICIPANT = 4
    ROLE_MODERATOR = 5


class EmotePlayedEmoteType(betterproto.Enum):
    EMOTE_TYPE_UNSPECIFIED = 0
    EMOTE_TYPE_PRIMARY = 1
    EMOTE_TYPE_SECONDARY = 2


@dataclass
class TelemetryHeader(betterproto.Message):
    """
    * Header contains the metadata for the entire session capture. This message
    should be written once at the beginning of the file. This format is
    designed for streaming. A capture file should consist of: 1. A single,
    length-delimited Header message. 2. A sequence of one or more length-
    delimited Frame messages.
    """

    # A unique identifier for the capture, e.g., a UUID.
    capture_id: str = betterproto.string_field(1)
    # The timestamp indicating when the capture was initiated.
    created_at: datetime = betterproto.message_field(2)
    # An arbitrary key-value store for additional metadata, such as game version,
    # server IP, or map name.
    metadata: Dict[str, str] = betterproto.map_field(
        3, betterproto.TYPE_STRING, betterproto.TYPE_STRING
    )


@dataclass
class Envelope(betterproto.Message):
    """
    Envelope is a wrapper message that can contain any of the defined telemetry
    and is primarily used for streaming scenarios.
    """

    header: "TelemetryHeader" = betterproto.message_field(1, group="message")
    frame: "LobbySessionStateFrame" = betterproto.message_field(2, group="message")


@dataclass
class LobbySessionStateFrame(betterproto.Message):
    """
    * Frame represents a single snapshot of game state data. A sequence of
    these messages follows the Header in the data stream.
    """

    # The sequential index of the frame, starting from 0.
    frame_index: int = betterproto.uint32_field(1)
    # The precise timestamp when this frame's data was captured.
    timestamp: datetime = betterproto.message_field(2)
    # A list of discrete events that occurred during this frame.
    events: List["LobbySessionEvent"] = betterproto.message_field(3)
    # The session data for this frame, including player locations.
    session: v1.SessionResponse = betterproto.message_field(4)
    # The user bones data for this frame.
    player_bones: v1.PlayerBonesResponse = betterproto.message_field(5)


@dataclass
class LobbySessionEvent(betterproto.Message):
    """A wrapper for any event that can occur during a session."""

    # Game State Events
    round_started: "RoundStarted" = betterproto.message_field(10, group="event")
    round_paused: "RoundPaused" = betterproto.message_field(11, group="event")
    round_unpaused: "RoundUnpaused" = betterproto.message_field(12, group="event")
    round_ended: "RoundEnded" = betterproto.message_field(13, group="event")
    match_ended: "MatchEnded" = betterproto.message_field(14, group="event")
    scoreboard_updated: "ScoreboardUpdated" = betterproto.message_field(
        15, group="event"
    )
    # Player Events
    player_joined: "PlayerJoined" = betterproto.message_field(20, group="event")
    player_left: "PlayerLeft" = betterproto.message_field(21, group="event")
    player_switched_team: "PlayerSwitchedTeam" = betterproto.message_field(
        22, group="event"
    )
    emote_played: "EmotePlayed" = betterproto.message_field(23, group="event")
    # Disc Events
    disc_possession_changed: "DiscPossessionChanged" = betterproto.message_field(
        30, group="event"
    )
    disc_thrown: "DiscThrown" = betterproto.message_field(31, group="event")
    disc_caught: "DiscCaught" = betterproto.message_field(32, group="event")
    # Scoring Events
    goal_scored: "GoalScored" = betterproto.message_field(40, group="event")
    # Stat-based Events
    player_goal: "PlayerGoal" = betterproto.message_field(41, group="event")
    player_save: "PlayerSave" = betterproto.message_field(50, group="event")
    player_stun: "PlayerStun" = betterproto.message_field(51, group="event")
    player_pass: "PlayerPass" = betterproto.message_field(52, group="event")
    player_steal: "PlayerSteal" = betterproto.message_field(53, group="event")
    player_block: "PlayerBlock" = betterproto.message_field(54, group="event")
    player_interception: "PlayerInterception" = betterproto.message_field(
        55, group="event"
    )
    player_assist: "PlayerAssist" = betterproto.message_field(56, group="event")
    player_shot_taken: "PlayerShotTaken" = betterproto.message_field(57, group="event")
    # Misc Events
    generic_event: "GenericEvent" = betterproto.message_field(60, group="event")


@dataclass
class RoundStarted(betterproto.Message):
    """Fired when the round starts."""

    round_number: int = betterproto.int32_field(1)


@dataclass
class RoundPaused(betterproto.Message):
    """Fired when the game is paused."""

    pause_state: v1.PauseState = betterproto.message_field(1)


@dataclass
class RoundUnpaused(betterproto.Message):
    """Fired when the game is unpaused."""

    pause_state: v1.PauseState = betterproto.message_field(1)


@dataclass
class RoundEnded(betterproto.Message):
    """Fired when a round finishes."""

    round_number: int = betterproto.int32_field(1)
    winning_team: "Role" = betterproto.enum_field(2)


@dataclass
class MatchEnded(betterproto.Message):
    """Fired when the match is over."""

    winning_team: "Role" = betterproto.enum_field(1)


@dataclass
class ScoreboardUpdated(betterproto.Message):
    """Fired on any change to score or round count."""

    blue_points: int = betterproto.int32_field(1)
    orange_points: int = betterproto.int32_field(2)
    blue_round_score: int = betterproto.int32_field(3)
    orange_round_score: int = betterproto.int32_field(4)
    game_clock_display: str = betterproto.string_field(5)


@dataclass
class PlayerJoined(betterproto.Message):
    """Fired when a new player is detected in the session."""

    # Contains the full initial state of the player.
    player: v1.TeamMember = betterproto.message_field(1)
    role: "Role" = betterproto.enum_field(2)


@dataclass
class PlayerLeft(betterproto.Message):
    """Fired when a player is no longer detected in the session."""

    player_slot: int = betterproto.int32_field(1)
    display_name: str = betterproto.string_field(2)


@dataclass
class PlayerSwitchedTeam(betterproto.Message):
    """Fired when a player changes teams or roles."""

    player_slot: int = betterproto.int32_field(1)
    new_role: "Role" = betterproto.enum_field(2)
    prev_role: "Role" = betterproto.enum_field(3)


@dataclass
class EmotePlayed(betterproto.Message):
    """Fired when a player starts playing an emote."""

    player_slot: int = betterproto.int32_field(1)
    emote: "EmotePlayedEmoteType" = betterproto.enum_field(2)


@dataclass
class DiscPossessionChanged(betterproto.Message):
    """Fired when possession of the disc changes."""

    # The account number of the player who now has possession.
    player_slot: int = betterproto.int32_field(1)
    previous_player_slot: int = betterproto.int32_field(2)


@dataclass
class DiscThrown(betterproto.Message):
    """Fired when a player throws the disc."""

    player_slot: int = betterproto.int32_field(1)
    # Contains the detailed physics of the throw.
    throw_details: v1.LastThrowInfo = betterproto.message_field(2)


@dataclass
class DiscCaught(betterproto.Message):
    """Fired when a player catches the disc."""

    player_slot: int = betterproto.int32_field(1)


@dataclass
class GoalScored(betterproto.Message):
    """Fired when a goal is scored."""

    # Contains all details about the score.
    score_details: v1.LastScore = betterproto.message_field(1)


@dataclass
class PlayerGoal(betterproto.Message):
    player_slot: int = betterproto.int32_field(1)
    total_goals: int = betterproto.int32_field(2)
    points: int = betterproto.int32_field(3)


@dataclass
class PlayerSave(betterproto.Message):
    """Fired when a player's 'saves' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_saves: int = betterproto.int32_field(2)


@dataclass
class PlayerStun(betterproto.Message):
    """Fired when a player's 'stuns' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_stuns: int = betterproto.int32_field(2)


@dataclass
class PlayerPass(betterproto.Message):
    """Fired when a player's 'passes' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_passes: int = betterproto.int32_field(2)


@dataclass
class PlayerSteal(betterproto.Message):
    """Fired when a player's 'steals' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_steals: int = betterproto.int32_field(2)
    # The slot of the player who had possession before it was stolen. -1 if
    # unknown or if possession was not tracked.
    victim_player_slot: int = betterproto.int32_field(3)


@dataclass
class PlayerBlock(betterproto.Message):
    """Fired when a player's 'blocks' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_blocks: int = betterproto.int32_field(2)


@dataclass
class PlayerInterception(betterproto.Message):
    """Fired when a player's 'interceptions' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_interceptions: int = betterproto.int32_field(2)


@dataclass
class PlayerAssist(betterproto.Message):
    """Fired when a player's 'assists' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_assists: int = betterproto.int32_field(2)


@dataclass
class PlayerShotTaken(betterproto.Message):
    """Fired when a player's 'shots_taken' stat increments."""

    player_slot: int = betterproto.int32_field(1)
    total_shots: int = betterproto.int32_field(2)


@dataclass
class GenericEvent(betterproto.Message):
    """
    Generic event for encoding arbitrary data via string. Use for custom
    events, debugging, or data that doesn't fit existing types.
    """

    # Event type identifier (e.g., "custom_debug", "experimental_metric")
    event_type: str = betterproto.string_field(1)
    # Arbitrary key-value data
    data: Dict[str, str] = betterproto.map_field(
        2, betterproto.TYPE_STRING, betterproto.TYPE_STRING
    )
    # Optional raw payload for non-structured data
    payload: str = betterproto.string_field(3)
